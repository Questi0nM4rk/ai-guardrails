# Ruff Configuration - Strict Python Linting
# https://docs.astral.sh/ruff/configuration/
# Copy to project root as ruff.toml

target-version = "py311"
line-length = 88
indent-width = 4

# Strict: treat all fixable violations as errors
fix = false
unsafe-fixes = false

[lint]
# Enable ALL rules, then selectively ignore
select = ["ALL"]

ignore = [
    # Conflicts with formatter
    "W191",   # tab-indentation
    "E111",   # indentation-with-invalid-multiple
    "E114",   # indentation-with-invalid-multiple-comment
    "E117",   # over-indented
    "D206",   # indent-with-spaces
    "D300",   # triple-single-quotes
    "Q000",   # bad-quotes-inline-string
    "Q001",   # bad-quotes-multiline-string
    "Q002",   # bad-quotes-docstring
    "Q003",   # avoidable-escaped-quote
    "COM812", # missing-trailing-comma
    "COM819", # prohibited-trailing-comma
    "ISC001", # single-line-implicit-string-concatenation
    "ISC002", # multi-line-implicit-string-concatenation

    # Project-specific (uncomment if needed)
    # "D100",  # Missing docstring in public module
    # "D104",  # Missing docstring in public package
]

# Enforce docstrings
[lint.pydocstyle]
convention = "google"

# Strict type checking hints
[lint.flake8-type-checking]
strict = true

# Require type annotations
[lint.flake8-annotations]
allow-star-arg-any = false
ignore-fully-untyped = false
mypy-init-return = true
suppress-dummy-args = false
suppress-none-returning = false

# Import sorting
[lint.isort]
force-single-line = false
force-sort-within-sections = true
known-first-party = []
combine-as-imports = true
split-on-trailing-comma = true

# Naming conventions
[lint.pep8-naming]
classmethod-decorators = ["classmethod", "pydantic.validator"]
staticmethod-decorators = ["staticmethod"]

# Complexity limits
[lint.mccabe]
max-complexity = 10

# Pylint-style checks
[lint.pylint]
max-args = 6
max-branches = 12
max-returns = 6
max-statements = 50
max-public-methods = 20

# Per-file ignores
[lint.per-file-ignores]
"tests/**/*.py" = [
    "S101",    # assert allowed in tests
    "ARG001",  # unused function argument (fixtures)
    "ARG002",  # unused method argument
    "D103",    # missing docstring in public function
    "PLR2004", # magic value comparison
]
"__init__.py" = [
    "D104",    # missing docstring in public package
    "F401",    # unused import (re-exports)
]
"conftest.py" = [
    "D100",    # missing docstring in public module
    "D103",    # missing docstring in public function
]

[format]
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false
line-ending = "lf"
docstring-code-format = true
docstring-code-line-length = 80
